<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Linac Model</title>
    
    <!-- Load A-Frame -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

    <!-- Load AR.js for AR functionality -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

    <!-- Load your CSS -->
    <link rel="stylesheet" href="Files/index.css">

    <!-- Import map for module-based loading (optional) -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
        }
      }
    </script>

    <!-- Include Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

    <!-- Your JavaScript files -->
    <script type="module" src="App/app.js"></script>
  </head>
  <body>
    <!-- Information Message -->
    <div id="message" class="message" style="display: none">
        <h1>Welcome to the Accelerator!</h1>
        <p>
        In this application you will be able to interact with the component parts of a Linear
        Accelerator, please use the buttons, or click on a model part to find out more information!
        </p>
    </div>

    <div id="startbutton" style="display: none; z-index: 200">
        <h2>Start</h2>
    </div>

    <div id="placebutton" style="display: none; z-index: 200">
        <h2>Move a Linear Accelerator with your fingers and press this button</h2>
    </div>

    <div id="popup" class="popup" style="display: none">
        <div id="popup-title" class="popuptitle"></div>
        <div id="popup-content-wrapper" class="popup-content-wrapper">
        <div id="popup-content" class="popup-content">
            <div id="popup-image"></div>
        </div>
        </div>
        <div class="popup-close-icon">
        <span id="close-popup">&#10006;</span>
        </div>
        <div class="button-container">
        <div id="backbutton" style="display: none; z-index: 200">
            <h2>Back</h2>
        </div>
        <div id="nextbutton" style="display: none; z-index: 200">
            <h2>Next</h2>
        </div>
        </div>
    </div>

    <!-- AR-enabled scene with surface placement -->
    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="antialias: true; colorManagement: true; logarithmicDepthBuffer: true;"
      gesture-detector>
      
      <!-- Ground detection -->
      <a-entity surface-placement="minDistance: 0.3; maxDistance: 3; showDebugPlane: false;">
        
        <!-- 3D models with scale adjustment for AR -->
        <a-entity
          id="model-group"
          scale="0.02 0.02 0.02"  <!-- Reduced scale -->
          position="0 0 0"
          shadow="receive: true; cast: true"
          gesture-detector
          xrextras-hold-drag
          xrextras-two-finger-rotate>
          
          <a-entity
            id="01_Bed"
            scale="1 1 1"
            gltf-model="#01_Bed"
            class="cantap"
            shadow="receive: true; cast: true"
          ></a-entity>

          <a-entity
            id="01_Casing"
            scale="1 1 1"
            gltf-model="#01_Casing"
            class="cantap"
            shadow="receive: true; cast: true"
          ></a-entity>

          <!-- Add more entities for each model -->
        </a-entity>

      </a-entity>

      <!-- AR Camera -->
      <a-entity camera="active: true" look-controls="enabled: true" arjs></a-entity>
      
    </a-scene>

  </body>
</html>
